{"ast":null,"code":"function send(method, url, data, callback) {\n  var config = {\n    method: method\n  };\n\n  if (![\"GET\", \"DELETE\"].includes(method)) {\n    config.headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    config.body = JSON.stringify(data);\n  }\n\n  fetch(url, config).then(function (res) {\n    if (!res.ok) {\n      return res.text().then(function (text) {\n        throw new Error(text);\n      });\n    } else {\n      return res.json();\n    }\n  }).then(function (val) {\n    return callback(null, val);\n  }).catch(function (err) {\n    return callback(err, null);\n  });\n}\n\nexport var webhookService = {\n  subscribe: subscribe,\n  addEndpoint: addEndpoint,\n  requestHelp: requestHelp\n};\n\nfunction subscribe(name, callback) {\n  send(\"POST\", \"http://localhost:8080/api/subs\", {\n    name: name\n  }, function (err, res) {\n    if (err) return callback(err, null);\n    return callback(null, JSON.parse(res));\n  });\n}\n\nfunction addEndpoint(subId, subUrl, events, callback) {\n  send(\"POST\", \"http://localhost:8080/api/newEndpoint\", {\n    subId: subId,\n    subUrl: subUrl,\n    events: events\n  }, function (err, res) {\n    if (err) return callback(err, null);\n    return callback(null, JSON.parse(res));\n  });\n}\n\nfunction requestHelp(student_id, student_name, callback) {\n  // remove user from local storage to log user out\n  send(\"POST\", \"http://localhost:8080/api/assist\", {\n    student_id: student_id,\n    student_name: student_name\n  }, function (err, res) {\n    if (err) return callback(err, null);\n    return callback(null, JSON.parse(res));\n  });\n}","map":{"version":3,"names":["send","method","url","data","callback","config","includes","headers","body","JSON","stringify","fetch","then","res","ok","text","Error","json","val","catch","err","webhookService","subscribe","addEndpoint","requestHelp","name","parse","subId","subUrl","events","student_id","student_name"],"sources":["/Users/kw/Desktop/cscc09/project-pacer/frontend/src/_services/webhook.service.js"],"sourcesContent":["function send(method, url, data, callback) {\n    const config = {\n      method: method,\n    };\n    if (![\"GET\", \"DELETE\"].includes(method)) {\n      config.headers = {\n        \"Content-Type\": \"application/json\",\n      };\n      config.body = JSON.stringify(data);\n    }\n    fetch(url, config)\n      .then((res) => {\n        if (!res.ok) {\n          return res.text().then((text) => {\n            throw new Error(text);\n          });\n        } else {\n          return res.json();\n        }\n      })\n      .then((val) => callback(null, val))\n      .catch((err) => callback(err, null));\n  }\n\nexport const webhookService = {\n    subscribe,\n    addEndpoint,\n    requestHelp\n};\n\nfunction subscribe(name, callback) {\n    send(\"POST\", \"http://localhost:8080/api/subs\", { name }, function (err, res) {\n        if (err) return callback(err, null);\n        return callback(null, JSON.parse(res));\n      });\n}\n\nfunction addEndpoint(subId, subUrl, events, callback) {\n    send(\"POST\", \"http://localhost:8080/api/newEndpoint\", { subId, subUrl, events }, function (err, res) {\n        if (err) return callback(err, null);\n        return callback(null, JSON.parse(res));\n      });\n}\n\nfunction requestHelp(student_id, student_name, callback) {\n    // remove user from local storage to log user out\n    send(\"POST\", \"http://localhost:8080/api/assist\", { student_id, student_name }, function (err, res) {\n        if (err) return callback(err, null);\n        return callback(null, JSON.parse(res));\n      });\n}\n"],"mappings":"AAAA,SAASA,IAAT,CAAcC,MAAd,EAAsBC,GAAtB,EAA2BC,IAA3B,EAAiCC,QAAjC,EAA2C;EACvC,IAAMC,MAAM,GAAG;IACbJ,MAAM,EAAEA;EADK,CAAf;;EAGA,IAAI,CAAC,CAAC,KAAD,EAAQ,QAAR,EAAkBK,QAAlB,CAA2BL,MAA3B,CAAL,EAAyC;IACvCI,MAAM,CAACE,OAAP,GAAiB;MACf,gBAAgB;IADD,CAAjB;IAGAF,MAAM,CAACG,IAAP,GAAcC,IAAI,CAACC,SAAL,CAAeP,IAAf,CAAd;EACD;;EACDQ,KAAK,CAACT,GAAD,EAAMG,MAAN,CAAL,CACGO,IADH,CACQ,UAACC,GAAD,EAAS;IACb,IAAI,CAACA,GAAG,CAACC,EAAT,EAAa;MACX,OAAOD,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgB,UAACG,IAAD,EAAU;QAC/B,MAAM,IAAIC,KAAJ,CAAUD,IAAV,CAAN;MACD,CAFM,CAAP;IAGD,CAJD,MAIO;MACL,OAAOF,GAAG,CAACI,IAAJ,EAAP;IACD;EACF,CATH,EAUGL,IAVH,CAUQ,UAACM,GAAD;IAAA,OAASd,QAAQ,CAAC,IAAD,EAAOc,GAAP,CAAjB;EAAA,CAVR,EAWGC,KAXH,CAWS,UAACC,GAAD;IAAA,OAAShB,QAAQ,CAACgB,GAAD,EAAM,IAAN,CAAjB;EAAA,CAXT;AAYD;;AAEH,OAAO,IAAMC,cAAc,GAAG;EAC1BC,SAAS,EAATA,SAD0B;EAE1BC,WAAW,EAAXA,WAF0B;EAG1BC,WAAW,EAAXA;AAH0B,CAAvB;;AAMP,SAASF,SAAT,CAAmBG,IAAnB,EAAyBrB,QAAzB,EAAmC;EAC/BJ,IAAI,CAAC,MAAD,EAAS,gCAAT,EAA2C;IAAEyB,IAAI,EAAJA;EAAF,CAA3C,EAAqD,UAAUL,GAAV,EAAeP,GAAf,EAAoB;IACzE,IAAIO,GAAJ,EAAS,OAAOhB,QAAQ,CAACgB,GAAD,EAAM,IAAN,CAAf;IACT,OAAOhB,QAAQ,CAAC,IAAD,EAAOK,IAAI,CAACiB,KAAL,CAAWb,GAAX,CAAP,CAAf;EACD,CAHC,CAAJ;AAIH;;AAED,SAASU,WAAT,CAAqBI,KAArB,EAA4BC,MAA5B,EAAoCC,MAApC,EAA4CzB,QAA5C,EAAsD;EAClDJ,IAAI,CAAC,MAAD,EAAS,uCAAT,EAAkD;IAAE2B,KAAK,EAALA,KAAF;IAASC,MAAM,EAANA,MAAT;IAAiBC,MAAM,EAANA;EAAjB,CAAlD,EAA6E,UAAUT,GAAV,EAAeP,GAAf,EAAoB;IACjG,IAAIO,GAAJ,EAAS,OAAOhB,QAAQ,CAACgB,GAAD,EAAM,IAAN,CAAf;IACT,OAAOhB,QAAQ,CAAC,IAAD,EAAOK,IAAI,CAACiB,KAAL,CAAWb,GAAX,CAAP,CAAf;EACD,CAHC,CAAJ;AAIH;;AAED,SAASW,WAAT,CAAqBM,UAArB,EAAiCC,YAAjC,EAA+C3B,QAA/C,EAAyD;EACrD;EACAJ,IAAI,CAAC,MAAD,EAAS,kCAAT,EAA6C;IAAE8B,UAAU,EAAVA,UAAF;IAAcC,YAAY,EAAZA;EAAd,CAA7C,EAA2E,UAAUX,GAAV,EAAeP,GAAf,EAAoB;IAC/F,IAAIO,GAAJ,EAAS,OAAOhB,QAAQ,CAACgB,GAAD,EAAM,IAAN,CAAf;IACT,OAAOhB,QAAQ,CAAC,IAAD,EAAOK,IAAI,CAACiB,KAAL,CAAWb,GAAX,CAAP,CAAf;EACD,CAHC,CAAJ;AAIH"},"metadata":{},"sourceType":"module"}