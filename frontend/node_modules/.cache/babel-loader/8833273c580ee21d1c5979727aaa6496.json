{"ast":null,"code":"import _toConsumableArray from \"/Users/kw/Desktop/cscc09/project-pacer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/kw/Desktop/cscc09/project-pacer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/kw/Desktop/cscc09/project-pacer/frontend/src/TeacherPage.jsx\";\nimport { useCallback, useState, useEffect, cloneElement, useRef } from \"react\";\nimport CodeMirror from \"@uiw/react-codemirror\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select, { SelectChangeEvent } from \"@mui/material/Select\";\nimport Box from \"@mui/material/Box\";\nimport Button from \"@mui/material/Button\";\nimport Grid from \"@mui/material/Grid\";\nimport EditorOptionsBar from \"./components/EditorOptions\";\nimport Toolbar from \"@mui/material/Toolbar\";\nimport Stack from \"@mui/material/Stack\";\nimport Storage from \"./components/Storage\";\nimport { upperPythonKeys, lowerPythonKeys, javaKeys } from \"./_helpers\";\nimport { EditorState, Compartment } from \"@codemirror/state\";\nimport { python, pythonLanguage } from \"@codemirror/lang-python\";\nimport { CompletionContext } from \"@codemirror/autocomplete\";\nimport { javascript, javascriptLanguage } from \"@codemirror/lang-javascript\";\nimport { java, javaLanguage } from \"@codemirror/lang-java\";\nimport { authenticationService } from \"./_services\";\nimport TeacherRightMenu from \"./components/TeacherRightMenu\";\nimport runCode from \"./_helpers/codeRunner\"; // [kw]\n\nimport React from \"react\"; // import { socket } from \"./_services\";\n\nimport CodeExecutionResWidgit from \"./components/CodeExecutionResWidgit\"; // for file up/downloading (via fb):\n\nimport { storage } from \"./_components/FireBase\";\nimport { ref, uploadBytesResumable, getDownloadURL } from \"@firebase/storage\";\nimport { display } from \"@mui/system\";\nvar drawerWidth = 200; // for cloud sync (via fb) [experimental - TODO]:\n\nvar t = 0; //ns\n\nfunction TeacherPage(_ref) {\n  var socket = _ref.socket,\n      curUser = _ref.curUser;\n\n  // code mirror config\n  var _useState = useState(function () {\n    return \"javascript\";\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      language = _useState2[0],\n      setLanguage = _useState2[1];\n\n  var _useState3 = useState(function () {\n    return false;\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      displayStudent = _useState4[0],\n      setDisplayStudent = _useState4[1]; // code display and transmission\n\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      code = _useState6[0],\n      setCode = _useState6[1];\n\n  var _useState7 = useState(function () {\n    return \"no student here\";\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      stuCode = _useState8[0],\n      setStuCode = _useState8[1]; // execution\n\n\n  var _useState9 = useState(function () {\n    return null;\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      out = _useState10[0],\n      setOut = _useState10[1];\n\n  var _useState11 = useState(function () {\n    return null;\n  }),\n      _useState12 = _slicedToArray(_useState11, 2),\n      err = _useState12[0],\n      setErr = _useState12[1];\n\n  var _useState13 = useState(function () {\n    return null;\n  }),\n      _useState14 = _slicedToArray(_useState13, 2),\n      stuOut = _useState14[0],\n      setStuOut = _useState14[1];\n\n  var _useState15 = useState(function () {\n    return null;\n  }),\n      _useState16 = _slicedToArray(_useState15, 2),\n      stuErr = _useState16[0],\n      setStuErr = _useState16[1]; // save and load\n\n\n  var _useState17 = useState(\"\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      codePath = _useState18[0],\n      setCodePath = _useState18[1];\n\n  var _useState19 = useState(\"\"),\n      _useState20 = _slicedToArray(_useState19, 2),\n      codeFilename = _useState20[0],\n      setCodeFilename = _useState20[1]; // audio call\n  // const [stuJoin, setStuJoin] = useState(() => {});\n\n\n  var _useState21 = useState(function () {\n    return \"\";\n  }),\n      _useState22 = _slicedToArray(_useState21, 2),\n      studentName = _useState22[0],\n      setStudentName = _useState22[1];\n\n  var _useState23 = useState([]),\n      _useState24 = _slicedToArray(_useState23, 2),\n      connectedUsers = _useState24[0],\n      setConnectedUsers = _useState24[1];\n\n  var extensions = [javascript({\n    jsx: true\n  })];\n\n  if (language === \"javascript\") {\n    extensions[0] = javascript({\n      jsx: true\n    });\n  } else if (language === \"python\") {\n    extensions[0] = python();\n    extensions[1] = globalPythonCompletions;\n  } else {\n    extensions[0] = java();\n    extensions[1] = globalJavaScriptCompletions;\n  } // for cloud sync (via fb) [experimental - TODO]:\n  // todo-kw: uncomment this\n  // useEffect(() => {\n  //   setTimeout(() => {\n  //     if (t == 1) {\n  //       t = 0;\n  //       const f = new File([code], codeFilename);\n  //       uploadFile(f);\n  //     } else {\n  //       t++;\n  //     }\n  //   }, 1000);\n  // });\n  // for file uploading (via fb):\n\n\n  var uploadFileFormHandler = function uploadFileFormHandler(event) {\n    event.preventDefault();\n    uploadFile(event.target[0].files[0]).then(function (res) {\n      res.file.text().then(function (code) {\n        setCode(code);\n        setCodePath(res.codePath);\n        setCodeFilename(res.file.name);\n      });\n    });\n  }; // for file uploading (via fb):\n\n\n  var uploadFile = function uploadFile(f) {\n    return new Promise(function (res, rej) {\n      if (!f) {\n        console.log(\"Upload failed. Try a different file.\");\n        rej();\n      }\n\n      var cp = \"/files/users/\".concat(authenticationService.currentUser.source._value.username, \"/\").concat(f.name);\n      var fileStorageRef = ref(storage, cp);\n      var uploadFileTaskStatus = uploadBytesResumable(fileStorageRef, f);\n      uploadFileTaskStatus.on(\"state_changed\", function (u) {\n        var p = 100;\n\n        if (u.totalBytes > 0) {\n          p = Math.round(u.bytesTransferred / u.totalBytes * 100);\n        }\n      }, function (err) {\n        console.log(err);\n        rej();\n      }, function () {\n        // when the file is uploaded successfully:\n        //getDownloadURL(uploadFileTaskStatus.snapshot.ref).then((url) => console.log(url));\n        res({\n          file: f,\n          codePath: cp\n        });\n      });\n    });\n  }; // for file downloading (via fb):\n\n\n  var makeDownloadFileRequest = function makeDownloadFileRequest(url) {\n    return new Promise(function (res, rej) {\n      var xhr = new XMLHttpRequest(); // handle xhr response:\n\n      xhr.responseType = \"text\";\n\n      xhr.onload = function (event) {\n        if (xhr.status == 200) {\n          res({\n            code: xhr.response\n          });\n        } else {\n          console.log(xhr.status);\n          rej();\n        }\n      };\n\n      xhr.onerror = function () {\n        console.log(xhr.status);\n        rej();\n      };\n\n      xhr.open(\"GET\", url);\n      xhr.send(); // is xhr onload async\n    });\n  }; // for file downloading (via fb):\n\n\n  var downloadFile = function downloadFile(fileLocation) {\n    var fileStorageRef = ref(storage, fileLocation);\n    return getDownloadURL(fileStorageRef).then(function (url) {\n      return makeDownloadFileRequest(url);\n    });\n  };\n\n  useEffect(function () {\n    // if(!socket.id) socket.connect()\n    socket.emit(\"set attributes\", \"teacher\", curUser); // socket.emit(\"onLecChange\", code);\n\n    socket.emit(\"teacher join\");\n    socket.on(\"connection broadcast\", function (SktId, role, curUser) {\n      // add newly connected student\n      if (connectedUsers.includes({\n        curUser: curUser,\n        SktId: SktId\n      })) {\n        console.log(\"[join broadcast]: user: \".concat(curUser, \" already joined (socket id: \").concat(SktId, \")\"));\n      } else {\n        setConnectedUsers(function (eixstingUsers) {\n          return [].concat(_toConsumableArray(eixstingUsers), [{\n            curUser: curUser,\n            SktId: SktId\n          }]);\n        });\n        console.log(\"[join broadcast]: new user: \".concat(curUser, \" (socket id: \").concat(SktId, \") joined as \").concat(role));\n      } // init remote window on student's end\n\n\n      setDisplayStudent(function (display) {\n        // emit teacher's code if not on review mode\n        if (!display) {\n          setCode(function (currentCode) {});\n        } else {// emit student's code if on review mode\n        }\n\n        setCode(function (currentCode) {\n          // emit teacher's code if not on review mode\n          if (!display) {\n            socket.emit(\"onLecChange\", currentCode);\n            return currentCode;\n          }\n        });\n      });\n    });\n    socket.on(\"disconnection broadcast\", function (SktId, role, curUser, curSid) {\n      setConnectedUsers(function (eixstingUsers) {\n        var userCopy = _toConsumableArray(eixstingUsers);\n\n        var idx = userCopy.findIndex(function (user) {\n          return user.SktId === SktId;\n        });\n\n        if (idx >= 0) {\n          console.log(\"clearing\");\n          userCopy.splice(idx, 1);\n        }\n\n        return userCopy;\n      });\n\n      if (SktId === curSid) {\n        setDisplayStudent(false);\n        socket.sid = \"\";\n      }\n\n      console.log(\"[disconnection broadcast]: \".concat(role, \" - \").concat(curUser, \" (socket id: \").concat(SktId, \")\"));\n    });\n    socket.on(\"student join\", function (sSktId, username) {\n      console.log(\"[TeacherPage - student join] joining student socket id: \", sSktId, \" and student name: \", username); // add connected student\n\n      if (!connectedUsers.includes({\n        curUser: username,\n        sSktId: sSktId\n      })) setConnectedUsers(function (eixstingUsers) {\n        return [].concat(_toConsumableArray(eixstingUsers), [{\n          curUser: username,\n          SktId: sSktId\n        }]);\n      }); // init teacher code on student's window\n\n      socket.emit(\"onLecChange\", code);\n    });\n    socket.on(\"fetch init\", function (code, sid) {\n      socket.sid = sid;\n      socket.on = true;\n      setStuCode(function () {\n        socket.emit(\"onLecChange\", code);\n        return code;\n      });\n    });\n    socket.on(\"onChange\", function (value, id) {\n      setStuCode(function () {\n        socket.emit(\"onLecChange\", value);\n        return value;\n      });\n    }); // todo-kw: revisit this function - may be useless given current logic\n\n    socket.on(\"no student\", function (msg) {\n      socket.sid = \"\";\n      socket.on = true;\n      setStuCode(msg);\n    }); // for file downloading (via fb):\n\n    if (code === \"\" && codePath === \"\" && codeFilename === \"\") {\n      var cp = \"/files/defaults/yteacher.txt\";\n      downloadFile(cp).then(function (res) {\n        var f = new File([res.code], \"whateveryouwant.txt\");\n        return uploadFile(f);\n      }).then(function (res) {\n        res.file.text().then(function (code) {\n          setCode(code);\n          setCodePath(res.codePath);\n          setCodeFilename(res.file.name);\n        });\n      });\n    } // for when code + codePath correspond to session, so an uploaded file can take over code slide\n\n\n    console.log(\"load teacher page complete\");\n  }, []); // new\n\n  useEffect(function () {\n    if (!displayStudent) socket.emit(\"onLecChange\", code);\n    if (displayStudent) socket.emit(\"onLecChange\", stuCode);\n  }, [displayStudent]);\n\n  var onChange = function onChange(value, viewUpdate) {\n    if (!displayStudent) socket.emit(\"onLecChange\", value);\n    setCode(value);\n  };\n\n  var onStuChange = function onStuChange(value, viewUpdate) {\n    var editor = viewUpdate.state.values[0].prevUserEvent;\n    console.log(\"from teacher page: \".concat(value, \" \").concat(socket.sid));\n\n    if (editor) {\n      socket.emit(\"onChange\", value, socket.sid);\n      socket.emit(\"onLecChange\", value);\n    }\n\n    setStuCode(value);\n  };\n\n  var run = function run() {\n    console.log(code);\n\n    var _runCode = runCode(code, language),\n        out = _runCode.out,\n        err = _runCode.err;\n\n    setOut(out);\n    setErr(err);\n  };\n\n  var clearExecutionRes = function clearExecutionRes() {\n    setOut(null);\n    setErr(null);\n  };\n\n  var runStuCode = function runStuCode() {\n    console.log(stuCode);\n\n    var _runCode2 = runCode(stuCode, language),\n        out = _runCode2.out,\n        err = _runCode2.err;\n\n    setStuOut(out);\n    setStuErr(err);\n  };\n\n  var clearStuExecutionRes = function clearStuExecutionRes() {\n    setStuOut(null);\n    setStuErr(null);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      flexGrow: 1,\n      p: 3,\n      width: {\n        sm: \"calc(100% - \".concat(drawerWidth, \"px)\")\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 9\n    }\n  }, displayStudent ? /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    alignItems: \"stretch\",\n    rowSpacing: 1,\n    columnSpacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 19\n    }\n  }, \"Code session for student \", studentName, \":\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CodeMirror, {\n    value: stuCode,\n    height: \"600px\",\n    theme: \"dark\",\n    extensions: extensions,\n    onChange: onStuChange,\n    hint: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    spacing: 2,\n    direction: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: runStuCode,\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 21\n    }\n  }, \"Run\"))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CodeExecutionResWidgit, {\n    out: stuOut,\n    err: stuErr,\n    clear: clearStuExecutionRes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 19\n    }\n  })))) : null, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: displayStudent ? 6 : 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    alignItems: \"stretch\",\n    rowSpacing: 4,\n    columnSpacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(EditorOptionsBar, {\n    language: language,\n    onLanguageChange: function onLanguageChange(e) {\n      return setLanguage(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 17\n    }\n  }, \"Client Screen (local):\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CodeMirror, {\n    value: code,\n    height: \"600px\",\n    theme: \"dark\",\n    extensions: extensions,\n    onChange: onChange,\n    hint: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    spacing: 3,\n    direction: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"space-evenly\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: run,\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 19\n    }\n  }, \"Run\"), /*#__PURE__*/React.createElement(Storage, {\n    value: code,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: uploadFileFormHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    className: \"input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 19\n    }\n  }, \"Upload\"))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CodeExecutionResWidgit, {\n    out: out,\n    err: err,\n    clear: clearExecutionRes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 17\n    }\n  })))))), /*#__PURE__*/React.createElement(TeacherRightMenu, {\n    drawerWidth: drawerWidth,\n    setDisplayStudent: setDisplayStudent,\n    setStudentName: setStudentName,\n    connectedUsers: connectedUsers,\n    socket: socket,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 7\n    }\n  }));\n}\n\nfunction myPythonCompletions(context) {\n  var word = context.matchBefore(/\\w*/);\n  if (word.from == word.to && !context.explicit) return null;\n\n  if (word.text[0] === word.text[0].toUpperCase() && /^[a-zA-Z]+$/.test(word.text[0])) {\n    return {\n      from: word.from,\n      options: upperPythonKeys\n    };\n  }\n\n  return {\n    from: word.from,\n    options: lowerPythonKeys\n  };\n}\n\nfunction myJavaCompletions(context) {\n  var word = context.matchBefore(/\\w*/);\n  if (word.from == word.to && !context.explicit) return null;\n  return {\n    from: word.from,\n    options: javaKeys\n  };\n}\n\nvar globalPythonCompletions = pythonLanguage.data.of({\n  autocomplete: myPythonCompletions\n});\nvar globalJavaScriptCompletions = javaLanguage.data.of({\n  autocomplete: myJavaCompletions\n});\nexport default TeacherPage;","map":{"version":3,"names":["useCallback","useState","useEffect","cloneElement","useRef","CodeMirror","InputLabel","MenuItem","FormControl","Select","SelectChangeEvent","Box","Button","Grid","EditorOptionsBar","Toolbar","Stack","Storage","upperPythonKeys","lowerPythonKeys","javaKeys","EditorState","Compartment","python","pythonLanguage","CompletionContext","javascript","javascriptLanguage","java","javaLanguage","authenticationService","TeacherRightMenu","runCode","React","CodeExecutionResWidgit","storage","ref","uploadBytesResumable","getDownloadURL","display","drawerWidth","t","TeacherPage","socket","curUser","language","setLanguage","displayStudent","setDisplayStudent","code","setCode","stuCode","setStuCode","out","setOut","err","setErr","stuOut","setStuOut","stuErr","setStuErr","codePath","setCodePath","codeFilename","setCodeFilename","studentName","setStudentName","connectedUsers","setConnectedUsers","extensions","jsx","globalPythonCompletions","globalJavaScriptCompletions","uploadFileFormHandler","event","preventDefault","uploadFile","target","files","then","res","file","text","name","f","Promise","rej","console","log","cp","currentUser","source","_value","username","fileStorageRef","uploadFileTaskStatus","on","u","p","totalBytes","Math","round","bytesTransferred","makeDownloadFileRequest","url","xhr","XMLHttpRequest","responseType","onload","status","response","onerror","open","send","downloadFile","fileLocation","emit","SktId","role","includes","eixstingUsers","currentCode","curSid","userCopy","idx","findIndex","user","splice","sid","sSktId","value","id","msg","File","onChange","viewUpdate","onStuChange","editor","state","values","prevUserEvent","run","clearExecutionRes","runStuCode","clearStuExecutionRes","flexGrow","width","sm","e","myPythonCompletions","context","word","matchBefore","from","to","explicit","toUpperCase","test","options","myJavaCompletions","data","of","autocomplete"],"sources":["/Users/kw/Desktop/cscc09/project-pacer/frontend/src/TeacherPage.jsx"],"sourcesContent":["import { useCallback, useState, useEffect, cloneElement, useRef } from \"react\";\nimport CodeMirror from \"@uiw/react-codemirror\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select, { SelectChangeEvent } from \"@mui/material/Select\";\nimport Box from \"@mui/material/Box\";\nimport Button from \"@mui/material/Button\";\nimport Grid from \"@mui/material/Grid\";\nimport EditorOptionsBar from \"./components/EditorOptions\";\nimport Toolbar from \"@mui/material/Toolbar\";\nimport Stack from \"@mui/material/Stack\";\nimport Storage from \"./components/Storage\";\n\nimport { upperPythonKeys, lowerPythonKeys, javaKeys } from \"./_helpers\";\n\nimport { EditorState, Compartment } from \"@codemirror/state\";\nimport { python, pythonLanguage } from \"@codemirror/lang-python\";\nimport { CompletionContext } from \"@codemirror/autocomplete\";\nimport { javascript, javascriptLanguage } from \"@codemirror/lang-javascript\";\nimport { java, javaLanguage } from \"@codemirror/lang-java\";\nimport { authenticationService } from \"./_services\";\nimport TeacherRightMenu from \"./components/TeacherRightMenu\";\nimport runCode from \"./_helpers/codeRunner\";\n// [kw]\nimport React from \"react\";\n// import { socket } from \"./_services\";\nimport CodeExecutionResWidgit from \"./components/CodeExecutionResWidgit\";\n\n// for file up/downloading (via fb):\nimport { storage } from \"./_components/FireBase\";\nimport { ref, uploadBytesResumable, getDownloadURL } from \"@firebase/storage\";\nimport { display } from \"@mui/system\";\n\nconst drawerWidth = 200;\n// for cloud sync (via fb) [experimental - TODO]:\nlet t = 0; //ns\n\n\nfunction TeacherPage({ socket, curUser }) {\n  // code mirror config\n  const [language, setLanguage] = useState(() => \"javascript\");\n  const [displayStudent, setDisplayStudent] = useState(() => false);\n  // code display and transmission\n  const [code, setCode] = useState(\"\");\n  const [stuCode, setStuCode] = useState(() => \"no student here\");\n  // execution\n  const [out, setOut] = useState(() => null);\n  const [err, setErr] = useState(() => null);\n  const [stuOut, setStuOut] = useState(() => null);\n  const [stuErr, setStuErr] = useState(() => null);\n  // save and load\n  const [codePath, setCodePath] = useState(\"\");\n  const [codeFilename, setCodeFilename] = useState(\"\");\n  // audio call\n  // const [stuJoin, setStuJoin] = useState(() => {});\n  const [studentName, setStudentName] = useState(() => \"\");\n  const [connectedUsers, setConnectedUsers] = useState([]);\n\n\n  let extensions = [javascript({ jsx: true })];\n  if (language === \"javascript\") {\n    extensions[0] = javascript({ jsx: true });\n  } else if (language === \"python\") {\n    extensions[0] = python();\n    extensions[1] = globalPythonCompletions;\n  } else {\n    extensions[0] = java();\n    extensions[1] = globalJavaScriptCompletions;\n  }\n\n\n  // for cloud sync (via fb) [experimental - TODO]:\n  // todo-kw: uncomment this\n  // useEffect(() => {\n  //   setTimeout(() => {\n  //     if (t == 1) {\n  //       t = 0;\n  //       const f = new File([code], codeFilename);\n  //       uploadFile(f);\n  //     } else {\n  //       t++;\n  //     }\n  //   }, 1000);\n  // });\n\n\n  // for file uploading (via fb):\n  const uploadFileFormHandler = (event) => {\n    event.preventDefault();\n    uploadFile(event.target[0].files[0]).then((res) => {\n      res.file.text().then((code) => {\n        setCode(code);\n        setCodePath(res.codePath);\n        setCodeFilename(res.file.name);\n      });\n    });\n  };\n\n\n  // for file uploading (via fb):\n  const uploadFile = (f) => {\n    return new Promise(function (res, rej) {\n      if (!f) {\n        console.log(\"Upload failed. Try a different file.\");\n        rej();\n      }\n      const cp = `/files/users/${authenticationService.currentUser.source._value.username}/${f.name}`;\n      const fileStorageRef = ref(storage, cp);\n      const uploadFileTaskStatus = uploadBytesResumable(fileStorageRef, f);\n      uploadFileTaskStatus.on(\n        \"state_changed\",\n        (u) => {\n          let p = 100;\n          if (u.totalBytes > 0) {\n            p = Math.round((u.bytesTransferred / u.totalBytes) * 100);\n          }\n        },\n        (err) => {\n          console.log(err);\n          rej();\n        },\n        () => {\n          // when the file is uploaded successfully:\n          //getDownloadURL(uploadFileTaskStatus.snapshot.ref).then((url) => console.log(url));\n          res({ file: f, codePath: cp });\n        }\n      );\n    });\n  };\n\n\n  // for file downloading (via fb):\n  const makeDownloadFileRequest = (url) => {\n    return new Promise(function (res, rej) {\n      let xhr = new XMLHttpRequest();\n      // handle xhr response:\n      xhr.responseType = \"text\";\n      xhr.onload = (event) => {\n        if (xhr.status == 200) {\n          res({ code: xhr.response });\n        } else {\n          console.log(xhr.status);\n          rej();\n        }\n      };\n      xhr.onerror = () => {\n        console.log(xhr.status);\n        rej();\n      };\n      xhr.open(\"GET\", url);\n      xhr.send(); // is xhr onload async\n    });\n  };\n\n\n  // for file downloading (via fb):\n  const downloadFile = (fileLocation) => {\n    const fileStorageRef = ref(storage, fileLocation);\n    return getDownloadURL(fileStorageRef).then((url) =>\n      makeDownloadFileRequest(url)\n    );\n  };\n  \n\n  useEffect(() => {\n    // if(!socket.id) socket.connect()\n\n    socket.emit(\"set attributes\", \"teacher\", curUser);\n\n    // socket.emit(\"onLecChange\", code);\n\n    socket.emit(\"teacher join\");\n\n    socket.on(\"connection broadcast\", (SktId, role, curUser) => {\n      // add newly connected student\n      if (connectedUsers.includes({ curUser, SktId })) {\n        console.log(\n          `[join broadcast]: user: ${curUser} already joined (socket id: ${SktId})`\n        );\n      } else {\n        setConnectedUsers(eixstingUsers => [...eixstingUsers, { curUser, SktId }]);\n        console.log(\n          `[join broadcast]: new user: ${curUser} (socket id: ${SktId}) joined as ${role}`\n        );\n      }\n      // init remote window on student's end\n      setDisplayStudent(display => {\n        // emit teacher's code if not on review mode\n        if (!display){\n          setCode(currentCode => {\n\n          });\n\n        } else { // emit student's code if on review mode\n\n        }\n\n\n        setCode(currentCode => {\n          // emit teacher's code if not on review mode\n          if(!display) {\n            socket.emit(\"onLecChange\", currentCode);\n            return currentCode;\n          }\n        })\n\n      });\n\n\n    });\n\n    socket.on(\"disconnection broadcast\", (SktId, role, curUser, curSid) => {\n      setConnectedUsers(eixstingUsers => {\n        const userCopy = [...eixstingUsers];\n        const idx = userCopy.findIndex((user) => user.SktId === SktId);\n        if (idx >= 0) {\n          console.log(\"clearing\");\n          userCopy.splice(idx, 1);\n        }\n        return userCopy\n      });\n    \n      if(SktId === curSid) {\n        setDisplayStudent(false);\n        socket.sid = \"\";\n      }\n\n      console.log(`[disconnection broadcast]: ${role} - ${curUser} (socket id: ${SktId})`);\n    });\n\n    socket.on(\"student join\", (sSktId, username) => {\n      console.log(\n        \"[TeacherPage - student join] joining student socket id: \", sSktId,\n        \" and student name: \", username\n      );\n      // add connected student\n      if (!connectedUsers.includes({ curUser: username, sSktId }))\n        setConnectedUsers(eixstingUsers => [...eixstingUsers, { curUser: username, SktId: sSktId }]);\n      // init teacher code on student's window\n      socket.emit(\"onLecChange\", code)\n    });\n\n    socket.on(\"fetch init\", (code, sid) => {\n      socket.sid = sid;\n      socket.on = true;\n\n      setStuCode(() => {\n        socket.emit(\"onLecChange\", code);\n        return code;\n      });\n    });\n\n    socket.on(\"onChange\", (value, id) => {\n      setStuCode(() => {\n        socket.emit(\"onLecChange\", value);\n        return value;\n      });\n    });\n\n    // todo-kw: revisit this function - may be useless given current logic\n    socket.on(\"no student\", (msg) => {\n      socket.sid = \"\";\n      socket.on = true;\n      setStuCode(msg);\n    });\n\n    // for file downloading (via fb):\n    if (code === \"\" && codePath === \"\" && codeFilename === \"\") {\n      let cp = \"/files/defaults/yteacher.txt\";\n      downloadFile(cp)\n        .then((res) => {\n          const f = new File([res.code], \"whateveryouwant.txt\");\n          return uploadFile(f);\n        })\n        .then((res) => {\n          res.file.text().then((code) => {\n            setCode(code);\n            setCodePath(res.codePath);\n            setCodeFilename(res.file.name);\n          });\n        });\n    } // for when code + codePath correspond to session, so an uploaded file can take over code slide\n\n    console.log(\"load teacher page complete\");\n  }, []);\n\n\n  // new\n  useEffect(() => {\n    if(!displayStudent) socket.emit(\"onLecChange\", code);\n    \n    if(displayStudent) socket.emit(\"onLecChange\", stuCode);\n    \n  },[displayStudent]);\n\n\n  const onChange = (value, viewUpdate) => {\n    if (!displayStudent) socket.emit(\"onLecChange\", value);\n    setCode(value);\n  };\n\n\n  const onStuChange = (value, viewUpdate) => {\n    const editor = viewUpdate.state.values[0].prevUserEvent;\n    console.log(`from teacher page: ${value} ${socket.sid}`);\n    if (editor) {\n      socket.emit(\"onChange\", value, socket.sid);\n      socket.emit(\"onLecChange\", value);\n    }\n    setStuCode(value);\n  };\n\n\n  const run = () => {\n    console.log(code);\n    const { out, err } = runCode(code, language);\n    setOut(out);\n    setErr(err);\n  };\n\n\n  const clearExecutionRes = () => {\n    setOut(null);\n    setErr(null);\n  };\n\n\n  const runStuCode = () => {\n    console.log(stuCode);\n    const { out, err } = runCode(stuCode, language);\n    setStuOut(out);\n    setStuErr(err);\n  };\n\n\n  const clearStuExecutionRes = () => {\n    setStuOut(null);\n    setStuErr(null);\n  };\n\n\n  return (\n    <>\n      <Box\n        sx={{\n          flexGrow: 1,\n          p: 3,\n          width: { sm: `calc(100% - ${drawerWidth}px)` },\n        }}\n      >\n        <Toolbar />\n        <Grid container spacing={2}>\n          {displayStudent ? (\n            <Grid item xs={6}>\n              <Grid\n                container\n                direction=\"column\"\n                alignItems=\"stretch\"\n                rowSpacing={1}\n                columnSpacing={3}\n              >\n                <Grid item xs={12}>\n                  <p>Code session for student {studentName}:</p>\n                </Grid>\n                {/* server display */}\n                <Grid item xs={12}>\n                  <CodeMirror\n                    value={stuCode}\n                    height=\"600px\"\n                    theme=\"dark\"\n                    extensions={extensions}\n                    onChange={onStuChange}\n                    hint=\"true\"\n                  />\n                </Grid>\n                <Grid item xs={12}>\n                  <Stack spacing={2} direction=\"row\">\n                    <Button onClick={runStuCode} variant=\"contained\">\n                      Run\n                    </Button>\n                  </Stack>\n                </Grid>\n                <Grid item xs={12}>\n                  <CodeExecutionResWidgit\n                    out={stuOut}\n                    err={stuErr}\n                    clear={clearStuExecutionRes}\n                  />\n                </Grid>\n              </Grid>\n            </Grid>\n          ) : null}\n\n          <Grid item xs={displayStudent ? 6 : 12}>\n            <Grid\n              container\n              direction=\"column\"\n              alignItems=\"stretch\"\n              rowSpacing={4}\n              columnSpacing={3}\n            >\n              <Grid item xs={12}>\n                <EditorOptionsBar\n                  language={language}\n                  onLanguageChange={(e) => setLanguage(e.target.value)}\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <p>Client Screen (local):</p>\n              </Grid>\n              <Grid item xs={12}>\n                {/* client display */}\n                <CodeMirror\n                  value={code}\n                  height=\"600px\"\n                  theme=\"dark\"\n                  extensions={extensions}\n                  onChange={onChange}\n                  hint=\"true\"\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <Stack\n                  spacing={3}\n                  direction=\"row\"\n                  justifyContent=\"center\"\n                  alignItems=\"space-evenly\"\n                >\n                  <Button onClick={run} variant=\"contained\">\n                    Run\n                  </Button>\n                  <Storage value={code}></Storage>\n                </Stack>\n              </Grid>\n              <Grid item xs={12}>\n                <form onSubmit={uploadFileFormHandler}>\n                  <input type=\"file\" className=\"input\" />\n                  <button type=\"submit\">Upload</button>\n                </form>\n              </Grid>\n              <Grid item xs={12}>\n                <CodeExecutionResWidgit\n                  out={out}\n                  err={err}\n                  clear={clearExecutionRes}\n                />\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Box>\n      <TeacherRightMenu\n        drawerWidth={drawerWidth}\n        setDisplayStudent={setDisplayStudent}\n        setStudentName={setStudentName}\n        connectedUsers={connectedUsers}\n        socket={socket}\n      />\n    </>\n  );\n}\n\nfunction myPythonCompletions(context: CompletionContext) {\n  let word = context.matchBefore(/\\w*/);\n  if (word.from == word.to && !context.explicit) return null;\n  if (\n    word.text[0] === word.text[0].toUpperCase() &&\n    /^[a-zA-Z]+$/.test(word.text[0])\n  ) {\n    return {\n      from: word.from,\n      options: upperPythonKeys,\n    };\n  }\n  return {\n    from: word.from,\n    options: lowerPythonKeys,\n  };\n}\n\nfunction myJavaCompletions(context: CompletionContext) {\n  let word = context.matchBefore(/\\w*/);\n  if (word.from == word.to && !context.explicit) return null;\n  return {\n    from: word.from,\n    options: javaKeys,\n  };\n}\n\nconst globalPythonCompletions = pythonLanguage.data.of({\n  autocomplete: myPythonCompletions,\n});\n\nconst globalJavaScriptCompletions = javaLanguage.data.of({\n  autocomplete: myJavaCompletions,\n});\n\nexport default TeacherPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}