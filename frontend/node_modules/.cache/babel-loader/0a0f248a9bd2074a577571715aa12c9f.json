{"ast":null,"code":"import _slicedToArray from \"/Users/kw/Desktop/cscc09/project-pacer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/Users/kw/Desktop/cscc09/project-pacer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _MuiSliderThumb,\n    _jsxFileName = \"/Users/kw/Desktop/cscc09/project-pacer/frontend/src/components/TeacherRightMenu.jsx\";\n\nimport AppBar from \"@mui/material/AppBar\";\nimport Box from \"@mui/material/Box\";\nimport CssBaseline from \"@mui/material/CssBaseline\";\nimport Divider from \"@mui/material/Divider\";\nimport Drawer from \"@mui/material/Drawer\";\nimport PersonIcon from \"@mui/icons-material/Person\";\nimport List from \"@mui/material/List\";\nimport ListItem from \"@mui/material/ListItem\";\nimport ListItemButton from \"@mui/material/ListItemButton\";\nimport ListItemIcon from \"@mui/material/ListItemIcon\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport Toolbar from \"@mui/material/Toolbar\";\nimport Typography from \"@mui/material/Typography\";\nimport { Button, styled } from \"@mui/material\";\nimport { authenticationService, socket } from \"../_services\"; // [kw]\n\nimport React, { useEffect } from 'react';\nimport Notifications from './Notifications';\nvar CustomEntry = styled(ListItem)({\n  backgroundColor: 'var(--color)',\n  '& .MuiSlider-thumb': (_MuiSliderThumb = {}, _defineProperty(_MuiSliderThumb, \"&:hover, &.Mui-focusVisible\", {\n    boxShadow: '0px 0px 0px 8px var(--box-shadow)'\n  }), _defineProperty(_MuiSliderThumb, \"&.Mui-active\", {\n    boxShadow: '0px 0px 0px 14px var(--box-shadow)'\n  }), _MuiSliderThumb)\n});\nvar connectedState = {\n  '--color': '#4caf50',\n  '--box-shadow': 'rgb(76, 175, 80, .16)'\n};\nvar requestingHelpState = {\n  '--color': '#FF8C00',\n  '--box-shadow': 'rgb(76, 175, 80, .16)'\n};\nvar defaultState = {\n  '--color': '#FFF',\n  '--box-shadow': 'rgb(25, 118, 210, .16)'\n};\n\nfunction TeacherRightMenu(_ref) {\n  var _this = this;\n\n  var drawerWidth = _ref.drawerWidth,\n      setDisplayStudent = _ref.setDisplayStudent,\n      setStudentName = _ref.setStudentName,\n      connectedUsers = _ref.connectedUsers,\n      setConnectedUsers = _ref.setConnectedUsers,\n      socket = _ref.socket,\n      roomId = _ref.roomId;\n\n  var _React$useState = React.useState(function () {\n    return null;\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      notificationToggle = _React$useState2[0],\n      setNotificationToggle = _React$useState2[1];\n\n  var _React$useState3 = React.useState(function () {\n    return \"default msg\";\n  }),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      helpMsg = _React$useState4[0],\n      setHelpMsg = _React$useState4[1];\n\n  var _React$useState5 = React.useState(function () {\n    var res = {};\n    connectedUsers.forEach(function (e) {\n      res[e.SktId] = defaultState;\n    });\n    return res;\n  }),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      userState = _React$useState6[0],\n      setUserState = _React$useState6[1]; // const [isTriggered, setIsTriggered] = React.useState(() => \"\")\n  // React.useEffect(() => {\n  //   let timer = null\n  //   if (isTriggered) {\n  //     timer = setTimeout(() => {\n  //       setUserState((next) => {\n  //         if (next[isTriggered] === requestingHelpState) {\n  //           next[isTriggered] = defaultState\n  //           console.log(\"triggered\")\n  //           return next\n  //         }\n  //       })\n  //       setIsTriggered(false)\n  //     })\n  //   }\n  //   return () => clearTimeout(timer);\n  // }, [isTriggered])\n\n\n  React.useEffect(function () {\n    // todo-kw: revisit\n    // if (socket){\n    socket.on(\"help request\", function (stuId, username) {\n      console.log(\"[TeacherPage - help request] student [\".concat(username, \"] need help; student socket id: \").concat(stuId, \" \"));\n      setUserState(function (existing) {\n        if (existing[stuId] !== connectedState) {\n          existing[stuId] = requestingHelpState;\n          console.log(existing); // setIsTriggered(stuId)\n        }\n\n        return existing;\n      });\n      var msg = \"Help requested from \".concat(username, \" with socket id \").concat(stuId);\n      setHelpMsg(function (oldmsg) {\n        return msg;\n      });\n      setNotificationToggle(function (oldState) {\n        return !oldState;\n      });\n    }); // }\n  }, []);\n\n  function loadStudentSession(studentName, studentCurSocket) {\n    if (!socket.sid || socket.sid !== studentCurSocket) {\n      socket.on = true;\n      console.log(\"else right menu: \".concat(socket.sid));\n      setUserState(function (existing) {\n        Object.keys(existing).forEach(function (key) {\n          existing[key] = defaultState;\n        });\n        existing[studentCurSocket] = connectedState;\n        console.log(existing);\n        return existing;\n      });\n      setDisplayStudent(true); // console.log(studentName);\n\n      setStudentName(studentName);\n      socket.emit(\"fetch code\", studentCurSocket, socket.id, socket.userRoom);\n    } else if (socket.on) {\n      socket.on = false;\n      setUserState(function (existing) {\n        existing[studentCurSocket] = defaultState;\n        return existing;\n      });\n      setDisplayStudent(false);\n    } else {\n      socket.on = true;\n      setUserState(function (existing) {\n        Object.keys(existing).forEach(function (key) {\n          existing[key] = defaultState;\n        });\n        existing[studentCurSocket] = connectedState;\n        console.log(existing);\n        return existing;\n      });\n      setDisplayStudent(true);\n    }\n  }\n\n  function logoutHandler() {\n    authenticationService.logout();\n    setConnectedUsers([]);\n    socket.removeAllListeners();\n    socket.disconnect();\n  } // function logoutHandler(){\n  //   // socket.disconnect()\n  //   // socket.emit(\"disconnection broadcast\");\n  //   authenticationService.logout();\n  //   socket.disconnect()\n  // }\n  // useEffect(() => {\n  //   console.log(\"current Socket Id:\", socket.id)\n  //   }, []\n  // )\n\n\n  var drawer = /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }\n  }, connectedUsers.map(function (text, index) {\n    return /*#__PURE__*/React.createElement(CustomEntry, {\n      key: text.SktId,\n      style: userState[text.SktId],\n      disablePadding: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ListItemButton, {\n      value: text.SktId,\n      onClick: function onClick() {\n        return loadStudentSession(text.curUser, text.SktId);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ListItemIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(PersonIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(ListItemText, {\n      primary: text.SktId,\n      secondary: text.curUser,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }\n    })));\n  })), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }\n  }));\n  return /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(AppBar, {\n    position: \"fixed\",\n    sx: {\n      width: {\n        sm: \"100%\"\n      },\n      ml: {\n        sm: \"\".concat(drawerWidth, \"px\")\n      },\n      zIndex: function zIndex(theme) {\n        return theme.zIndex.drawer + 1;\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    sx: {\n      justifyContent: \"space-between\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    noWrap: true,\n    component: \"div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 11\n    }\n  }, \"Pacer\"), /*#__PURE__*/React.createElement(Button, {\n    position: \"fixed\",\n    component: \"div\",\n    className: \"logoutButton\",\n    variant: \"contained\",\n    color: \"error\",\n    sx: {\n      color: \"#fff\",\n      zIndex: function zIndex(theme) {\n        return theme.zIndex.drawer + 2;\n      }\n    },\n    onClick: logoutHandler //onClick={authenticationService.logout}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 11\n    }\n  }, \"Logout\"))), /*#__PURE__*/React.createElement(Box, {\n    component: \"nav\",\n    sx: {\n      width: {\n        sm: drawerWidth\n      },\n      flexShrink: {\n        sm: 0\n      }\n    },\n    \"aria-label\": \"mailbox folders\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Drawer, {\n    variant: \"permanent\",\n    sx: {\n      display: {\n        xs: \"none\",\n        sm: \"block\"\n      },\n      \"& .MuiDrawer-paper\": {\n        boxSizing: \"border-box\",\n        width: drawerWidth\n      }\n    },\n    anchor: \"right\",\n    open: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 9\n    }\n  }, drawer)), /*#__PURE__*/React.createElement(Notifications, {\n    msg: helpMsg,\n    variant: \"info\",\n    open: notificationToggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 5\n    }\n  }));\n}\n\nexport default TeacherRightMenu;","map":{"version":3,"names":["AppBar","Box","CssBaseline","Divider","Drawer","PersonIcon","List","ListItem","ListItemButton","ListItemIcon","ListItemText","Toolbar","Typography","Button","styled","authenticationService","socket","React","useEffect","Notifications","CustomEntry","backgroundColor","boxShadow","connectedState","requestingHelpState","defaultState","TeacherRightMenu","drawerWidth","setDisplayStudent","setStudentName","connectedUsers","setConnectedUsers","roomId","useState","notificationToggle","setNotificationToggle","helpMsg","setHelpMsg","res","forEach","e","SktId","userState","setUserState","on","stuId","username","console","log","existing","msg","oldmsg","oldState","loadStudentSession","studentName","studentCurSocket","sid","Object","keys","key","emit","id","userRoom","logoutHandler","logout","removeAllListeners","disconnect","drawer","map","text","index","curUser","width","sm","ml","zIndex","theme","justifyContent","color","flexShrink","display","xs","boxSizing"],"sources":["/Users/kw/Desktop/cscc09/project-pacer/frontend/src/components/TeacherRightMenu.jsx"],"sourcesContent":["import AppBar from \"@mui/material/AppBar\";\nimport Box from \"@mui/material/Box\";\nimport CssBaseline from \"@mui/material/CssBaseline\";\nimport Divider from \"@mui/material/Divider\";\nimport Drawer from \"@mui/material/Drawer\";\nimport PersonIcon from \"@mui/icons-material/Person\";\nimport List from \"@mui/material/List\";\nimport ListItem from \"@mui/material/ListItem\";\nimport ListItemButton from \"@mui/material/ListItemButton\";\nimport ListItemIcon from \"@mui/material/ListItemIcon\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport Toolbar from \"@mui/material/Toolbar\";\nimport Typography from \"@mui/material/Typography\";\nimport { Button, styled } from \"@mui/material\";\nimport { authenticationService, socket } from \"../_services\";\n// [kw]\nimport React, { useEffect } from 'react';\nimport Notifications from './Notifications';\n\nconst CustomEntry = styled(ListItem)({\n  backgroundColor: 'var(--color)',\n  '& .MuiSlider-thumb': {\n    [`&:hover, &.Mui-focusVisible`]: {\n      boxShadow: '0px 0px 0px 8px var(--box-shadow)',\n    },\n    [`&.Mui-active`]: {\n      boxShadow: '0px 0px 0px 14px var(--box-shadow)',\n    },\n  },\n});\n\nconst connectedState = {\n  '--color': '#4caf50',\n  '--box-shadow': 'rgb(76, 175, 80, .16)',\n};\n\nconst requestingHelpState = {\n  '--color': '#FF8C00',\n  '--box-shadow': 'rgb(76, 175, 80, .16)',\n};\n\nconst defaultState = {\n  '--color': '#FFF',\n  '--box-shadow': 'rgb(25, 118, 210, .16)',\n};\n\n\nfunction TeacherRightMenu({ drawerWidth, setDisplayStudent, setStudentName, connectedUsers, setConnectedUsers, socket, roomId }) {\n  const [notificationToggle, setNotificationToggle] = React.useState(() => null);\n  const [helpMsg, setHelpMsg] = React.useState(() => \"default msg\");\n  const [userState, setUserState] = React.useState(() => {\n    let res = {}\n    connectedUsers.forEach(e => {\n      res[e.SktId] = defaultState\n    });\n    return res\n  });\n  // const [isTriggered, setIsTriggered] = React.useState(() => \"\")\n\n  // React.useEffect(() => {\n  //   let timer = null\n  //   if (isTriggered) {\n  //     timer = setTimeout(() => {\n  //       setUserState((next) => {\n  //         if (next[isTriggered] === requestingHelpState) {\n  //           next[isTriggered] = defaultState\n  //           console.log(\"triggered\")\n  //           return next\n  //         }\n  //       })\n  //       setIsTriggered(false)\n  //     })\n  //   }\n  //   return () => clearTimeout(timer);\n  // }, [isTriggered])\n\n\n  React.useEffect(() => {\n    // todo-kw: revisit\n    // if (socket){\n      socket.on(\"help request\", (stuId, username) => {\n        console.log(\n          `[TeacherPage - help request] student [${username}] need help; student socket id: ${stuId} `\n        );\n        setUserState((existing) => {\n          if (existing[stuId] !== connectedState) {\n            existing[stuId] = requestingHelpState\n            console.log(existing)\n            // setIsTriggered(stuId)\n          }\n          return existing\n        });\n        const msg = `Help requested from ${username} with socket id ${stuId}`\n        setHelpMsg(oldmsg => msg)\n        setNotificationToggle(oldState => !oldState)\n      });\n    // }\n  }, [])\n\n  function loadStudentSession(studentName, studentCurSocket) {\n    if (!socket.sid || socket.sid !== studentCurSocket){\n      socket.on = true;\n      console.log(`else right menu: ${socket.sid}`);\n      setUserState((existing) => {\n        Object.keys(existing).forEach(key => {\n          existing[key] = defaultState;\n        });\n        existing[studentCurSocket] = connectedState\n        console.log(existing)\n        return existing\n      });\n      setDisplayStudent(true);\n      // console.log(studentName);\n      setStudentName(studentName);\n      socket.emit(\"fetch code\", studentCurSocket, socket.id, socket.userRoom);\n    } else if (socket.on) {\n      socket.on = false;\n      setUserState((existing) => {\n        existing[studentCurSocket] = defaultState\n        return existing\n      });\n      setDisplayStudent(false);\n    } else {\n      socket.on = true;\n      setUserState((existing) => {\n        Object.keys(existing).forEach(key => {\n          existing[key] = defaultState;\n        });\n        existing[studentCurSocket] = connectedState\n        console.log(existing)\n        return existing\n      });\n      setDisplayStudent(true);\n    }\n  }\n\n  function logoutHandler(){\n    authenticationService.logout();\n    setConnectedUsers([]);\n    socket.removeAllListeners();\n    socket.disconnect();\n  }\n\n  // function logoutHandler(){\n  //   // socket.disconnect()\n  //   // socket.emit(\"disconnection broadcast\");\n  //   authenticationService.logout();\n  //   socket.disconnect()\n  // }\n\n  // useEffect(() => {\n  //   console.log(\"current Socket Id:\", socket.id)\n  //   }, []\n  // )\n    \n  const drawer = (\n    <div>\n      <Toolbar />\n      <Divider />\n      <List>\n        {connectedUsers.map((text, index) => (\n          <CustomEntry key={text.SktId} style={userState[text.SktId]} disablePadding>\n            <ListItemButton value={text.SktId} onClick={() => loadStudentSession(text.curUser, text.SktId, )}>\n              <ListItemIcon>\n                <PersonIcon />\n              </ListItemIcon>\n              <ListItemText primary={text.SktId} secondary={text.curUser}/>\n            </ListItemButton>\n          </CustomEntry>\n        ))}\n      </List>\n      <Divider />\n      {/* <List>\n        {[\"Item5\", \"Item6\", \"Item7\"].map((text, index) => (\n          <ListItem key={text} disablePadding>\n            <ListItemButton>\n              <ListItemIcon>\n                <PersonIcon />\n              </ListItemIcon>\n              <ListItemText primary={text} />\n            </ListItemButton>\n          </ListItem>\n        ))}\n      </List> */}\n    </div>\n  );\n\n  return (\n    <Box>\n      <AppBar\n        position=\"fixed\"\n        sx={{\n          width: { sm: `100%` },\n          ml: { sm: `${drawerWidth}px` },\n          zIndex: (theme) => theme.zIndex.drawer + 1,\n        }}\n      >\n        <Toolbar sx={{ justifyContent: \"space-between\" }}>\n          <Typography variant=\"h6\" noWrap component=\"div\">\n            Pacer\n          </Typography>\n          <Button\n            position=\"fixed\"\n            component=\"div\"\n            className=\"logoutButton\"\n            variant=\"contained\"\n            color=\"error\"\n            sx={{\n              color: \"#fff\",\n              zIndex: (theme) => theme.zIndex.drawer + 2,\n            }}\n            onClick={logoutHandler}\n            //onClick={authenticationService.logout}\n          >\n            Logout\n          </Button>\n        </Toolbar>\n      </AppBar>\n      <Box\n        component=\"nav\"\n        sx={{ width: { sm: drawerWidth }, flexShrink: { sm: 0 } }}\n        aria-label=\"mailbox folders\"\n      >\n        <Drawer\n          variant=\"permanent\"\n          sx={{\n            display: { xs: \"none\", sm: \"block\" },\n            \"& .MuiDrawer-paper\": {\n              boxSizing: \"border-box\",\n              width: drawerWidth,\n            },\n          }}\n          anchor=\"right\"\n          open\n        >\n          {drawer}\n        </Drawer>\n      </Box>\n    <Notifications msg={helpMsg} variant=\"info\" open={notificationToggle} />\n    </Box>\n  );\n}\n\nexport default TeacherRightMenu;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}