{"ast":null,"code":"import _asyncToGenerator from \"/Users/kw/Desktop/cscc09/project-pacer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/kw/Desktop/cscc09/project-pacer/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/kw/Desktop/cscc09/project-pacer/frontend/src/StudentPage.jsx\";\n\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return generator._invoke = function (innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; }(innerFn, self, context), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; this._invoke = function (method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (object) { var keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, catch: function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n\nimport { useCallback, useState, useEffect, useRef } from \"react\";\nimport Peer from \"simple-peer\";\nimport CodeMirror from \"@uiw/react-codemirror\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Stack from \"@mui/material/Stack\";\nimport Select, { SelectChangeEvent } from \"@mui/material/Select\";\nimport Box from \"@mui/material/Box\";\nimport Button from \"@mui/material/Button\";\nimport Grid from \"@mui/material/Grid\";\nimport EditorOptionsBar from \"./components/EditorOptions\";\nimport Toolbar from \"@mui/material/Toolbar\";\nimport StudentRightMenu from \"./components/StudentRightMenu\";\nimport Storage from \"./components/Storage\";\nimport CallIcon from '@mui/icons-material/Call'; // for file up/downloading (via fb):\n\nimport { storage } from \"./_components/FireBase\";\nimport { ref, uploadBytesResumable, getDownloadURL } from \"@firebase/storage\";\nimport { upperPythonKeys, lowerPythonKeys, javaKeys } from \"./_helpers\";\nimport { EditorState, Compartment } from \"@codemirror/state\";\nimport { python, pythonLanguage } from \"@codemirror/lang-python\";\nimport { CompletionContext } from \"@codemirror/autocomplete\";\nimport { javascript, javascriptLanguage } from \"@codemirror/lang-javascript\";\nimport { java, javaLanguage } from \"@codemirror/lang-java\";\nimport { authenticationService } from \"./_services\";\nimport runCode from \"./_helpers/codeRunner\";\nimport React from \"react\"; // import { socket } from \"./_services\";\n\nimport CodeExecutionResWidgit from \"./components/CodeExecutionResWidgit\";\nimport \"./StudentPage.css\";\nvar drawerWidth = 200; // for cloud sync (via fb) [experimental - TODO]:\n\nvar t = 0; // ns\n\nvar servers = {\n  iceServers: [{\n    urls: ['stun:stun1.l.google.com:19302', 'stun:stun2.l.google.com:19302']\n  }],\n  iceCandidatePoolSize: 10\n};\n\nfunction StudentPage(_ref) {\n  var socket = _ref.socket,\n      curUser = _ref.curUser;\n\n  // code mirror config\n  var _useState = useState(function () {\n    return \"javascript\";\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      language = _useState2[0],\n      setLanguage = _useState2[1]; // code display and transmission\n  // like a cache: keeping this since downloading & uploading the file on each update is very inefficient\n\n\n  var _useState3 = useState(function () {\n    return \"\";\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      code = _useState4[0],\n      setCode = _useState4[1];\n\n  var _useState5 = useState(function () {\n    return \"console.log('hello students!');\";\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      lecCode = _useState6[0],\n      setLecCode = _useState6[1];\n\n  var _useState7 = useState(function () {\n    return false;\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      flag = _useState8[0],\n      setFlag = _useState8[1]; // execution\n\n\n  var _useState9 = useState(function () {\n    return null;\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      out = _useState10[0],\n      setOut = _useState10[1];\n\n  var _useState11 = useState(function () {\n    return null;\n  }),\n      _useState12 = _slicedToArray(_useState11, 2),\n      err = _useState12[0],\n      setErr = _useState12[1]; // save and load\n\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      codePath = _useState14[0],\n      setCodePath = _useState14[1]; // set init val to \"\"\n\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      codeFilename = _useState16[0],\n      setCodeFilename = _useState16[1]; // audio call\n\n\n  var _useState17 = useState(function () {\n    return null;\n  }),\n      _useState18 = _slicedToArray(_useState17, 2),\n      callStream = _useState18[0],\n      setCallStream = _useState18[1];\n\n  var _useState19 = useState(function () {\n    return false;\n  }),\n      _useState20 = _slicedToArray(_useState19, 2),\n      receivingCall = _useState20[0],\n      setReceivingCall = _useState20[1];\n\n  var _useState21 = useState(function () {\n    return \"\";\n  }),\n      _useState22 = _slicedToArray(_useState21, 2),\n      caller = _useState22[0],\n      setCaller = _useState22[1];\n\n  var _useState23 = useState(function () {\n    return null;\n  }),\n      _useState24 = _slicedToArray(_useState23, 2),\n      callerSignal = _useState24[0],\n      setCallerSignal = _useState24[1];\n\n  var _useState25 = useState(function () {\n    return false;\n  }),\n      _useState26 = _slicedToArray(_useState25, 2),\n      callAccepted = _useState26[0],\n      setCallAccepted = _useState26[1];\n\n  var localVideo = useRef();\n  var remoteVideo = useRef();\n  var extensions = [javascript({\n    jsx: true\n  })];\n\n  if (language === \"javascript\") {\n    extensions[0] = javascript({\n      jsx: true\n    });\n  } else if (language === \"python\") {\n    extensions[0] = python();\n    extensions[1] = globalPythonCompletions;\n  } else {\n    extensions[0] = java();\n    extensions[1] = globalJavaScriptCompletions;\n  } // for cloud sync (via fb) [experimental - TODO]:\n  // todo-kw: uncomment this\n  // useEffect(() => {\n  //   setTimeout(() => {\n  //     if (t == 1) {\n  //       t = 0;\n  //       const f = new File([code], codeFilename);\n  //       uploadFile(f);\n  //     } else {\n  //       t++;\n  //     }\n  //   }, 1000);\n  // });\n  // for file uploading (via fb):\n\n\n  var uploadFileFormHandler = function uploadFileFormHandler(event) {\n    event.preventDefault();\n    uploadFile(event.target[0].files[0]).then(function (res) {\n      res.file.text().then(function (code) {\n        setCode(code);\n        setCodePath(res.codePath);\n        setCodeFilename(res.file.name);\n      });\n    });\n  }; // for file uploading (via fb):\n\n\n  var uploadFile = function uploadFile(f) {\n    return new Promise(function (res, rej) {\n      if (!f) {\n        console.log('Upload failed. Try a different file.');\n        rej();\n      }\n\n      var cp = \"/files/users/\".concat(authenticationService.currentUser.source._value.username, \"/\").concat(f.name);\n      var fileStorageRef = ref(storage, cp);\n      var uploadFileTaskStatus = uploadBytesResumable(fileStorageRef, f);\n      uploadFileTaskStatus.on(\"state_changed\", function (u) {\n        var p = 100;\n\n        if (u.totalBytes > 0) {\n          p = Math.round(u.bytesTransferred / u.totalBytes * 100);\n        }\n      }, function (err) {\n        console.log(err);\n        rej();\n      }, function () {\n        // when the file is uploaded successfully:\n        //getDownloadURL(uploadFileTaskStatus.snapshot.ref).then((url) => console.log(url));\n        res({\n          \"file\": f,\n          \"codePath\": cp\n        });\n      });\n    });\n  }; // for file downloading (via fb):\n\n\n  var makeDownloadFileRequest = function makeDownloadFileRequest(url) {\n    return new Promise(function (res, rej) {\n      var xhr = new XMLHttpRequest(); // handle xhr response:\n\n      xhr.responseType = 'text';\n\n      xhr.onload = function (event) {\n        if (xhr.status == 200) {\n          res({\n            \"code\": xhr.response\n          });\n        } else {\n          console.log(xhr.status);\n          rej();\n        }\n      };\n\n      xhr.onerror = function () {\n        console.log(xhr.status);\n        rej();\n      };\n\n      xhr.open('GET', url);\n      xhr.send(); // is xhr onload async\n    });\n  }; // for file downloading (via fb):\n\n\n  var downloadFile = function downloadFile(fileLocation) {\n    var fileStorageRef = ref(storage, fileLocation);\n    return getDownloadURL(fileStorageRef).then(function (url) {\n      return makeDownloadFileRequest(url);\n    });\n  };\n\n  useEffect(function () {\n    if (!socket.id) socket.connect();\n    socket.emit(\"set attributes\", \"student\", curUser);\n    socket.on(\"connection broadcast\", function (SktId, role, curUser) {\n      console.log(\"connection broadcast: new user: \".concat(curUser, \" (socket id: \").concat(SktId, \") joined as \").concat(role));\n    });\n    socket.on(\"disconnection broadcast\", function (SktId, role, curUser) {\n      if (role === 'teacher') socket.tid = \"\";\n      console.log(\"disconnection broadcast: \".concat(role, \" - \").concat(curUser, \" (socket id: \").concat(SktId, \")\"));\n    });\n    socket.on(\"teacher join\", function (tid) {\n      socket.tid = tid;\n      socket.emit('student join', curUser);\n    });\n    socket.on(\"fetch request\", function () {\n      setFlag(true);\n    });\n    socket.on(\"stop request\", function () {\n      setFlag(false);\n    });\n    socket.on(\"onChange\", function (value, tid) {\n      if (flag) setCode(value);\n    });\n    socket.on(\"onLecChange\", function (value, tid) {\n      if (!socket.tid) socket.tid = tid;\n      setLecCode(value);\n    }); // for file downloading (via fb):\n\n    if (code === \"\" && codePath === \"\" && codeFilename === \"\") {\n      var cp = \"/files/defaults/ystudent.txt\";\n      downloadFile(cp).then(function (res) {\n        var f = new File([res.code], \"whateveryouwant.txt\");\n        return uploadFile(f);\n      }).then(function (res) {\n        res.file.text().then(function (code) {\n          setCode(code);\n          setCodePath(res.codePath);\n          setCodeFilename(res.file.name);\n        });\n      });\n    } // for when code + codePath correspond to session, so an uploaded file can take over code slide\n\n\n    socket.on(\"hey\", function (data) {\n      setReceivingCall(true);\n      setCaller(data.from);\n      setCallerSignal(data.signal);\n    });\n    console.log(\"load student page complete\");\n  }, []);\n  useEffect(function () {\n    socket.emit(\"fetch init\", code);\n  }, [flag]);\n\n  var onChange = function onChange(value, viewUpdate) {\n    var editor = viewUpdate.state.values[0].prevUserEvent;\n    if (flag && editor) socket.emit(\"onChange\", value, socket.tid);\n    setCode(value);\n  };\n\n  var run = function run() {\n    var _runCode = runCode(code, language),\n        out = _runCode.out,\n        err = _runCode.err;\n\n    setOut(out);\n    setErr(err);\n  };\n\n  var clearExecutionRes = function clearExecutionRes() {\n    setOut(null);\n    setErr(null);\n  };\n\n  var setupCall = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(teacherSocketId) {\n      var localStream, peer;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(teacherSocketId);\n              console.log(\"seting up call\");\n              _context.next = 4;\n              return navigator.mediaDevices.getUserMedia({\n                video: false,\n                audio: true\n              });\n\n            case 4:\n              localStream = _context.sent;\n              console.log(\"hardware setup complete\");\n              setCallStream(localStream);\n\n              if (localVideo.current) {\n                localVideo.current.srcObject = localStream;\n              }\n\n              peer = new Peer({\n                initiator: true,\n                trickle: false,\n                config: servers,\n                stream: callStream\n              });\n              peer.on(\"signal\", function (data) {\n                //yourID\n                socket.emit(\"callUser\", {\n                  userToCall: teacherSocketId,\n                  signalData: data,\n                  from: \"yourID\"\n                });\n              });\n              peer.on(\"stream\", function (stream) {\n                if (remoteVideo.current) {\n                  remoteVideo.current.srcObject = stream;\n                }\n              }); // todo-kw: move it out\n\n              socket.on(\"callAccepted\", function (signal) {\n                setCallAccepted(true);\n                peer.signal(signal);\n              });\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function setupCall(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var acceptCall = function acceptCall() {\n    setCallAccepted(true);\n    var peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream: callStream\n    });\n    peer.on(\"signal\", function (data) {\n      socket.emit(\"acceptCall\", {\n        signal: data,\n        to: caller\n      });\n    });\n    peer.on(\"stream\", function (stream) {\n      remoteVideo.current.srcObject = stream;\n    });\n    peer.signal(callerSignal);\n  };\n\n  var LocalVideo;\n\n  if (callStream) {\n    LocalVideo = /*#__PURE__*/React.createElement(\"video\", {\n      playsInline: true,\n      muted: true,\n      ref: localVideo,\n      autoPlay: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 7\n      }\n    });\n  }\n\n  var RemoteVideo;\n\n  if (callAccepted) {\n    RemoteVideo = /*#__PURE__*/React.createElement(\"video\", {\n      playsInline: true,\n      ref: remoteVideo,\n      autoPlay: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 7\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      flexGrow: 1,\n      p: 3,\n      width: {\n        sm: \"calc(100% - \".concat(drawerWidth, \"px)\")\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    alignItems: \"stretch\",\n    rowSpacing: 1,\n    columnSpacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 17\n    }\n  }, \"Server Screen (remote):\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CodeMirror, {\n    value: lecCode,\n    height: \"600px\",\n    theme: \"dark\",\n    extensions: extensions,\n    hint: \"true\",\n    readOnly: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    alignItems: \"stretch\",\n    rowSpacing: 4,\n    columnSpacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(EditorOptionsBar, {\n    language: language,\n    onLanguageChange: function onLanguageChange(e) {\n      return setLanguage(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 17\n    }\n  }, \"Client Screen (local):\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CodeMirror, {\n    value: code,\n    height: \"600px\",\n    theme: \"dark\",\n    extensions: extensions,\n    onChange: onChange,\n    hint: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    spacing: 3,\n    direction: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"space-evenly\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: run,\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 19\n    }\n  }, \"Run\"), /*#__PURE__*/React.createElement(Storage, {\n    value: code,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: uploadFileFormHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    className: \"input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 19\n    }\n  }, \"Upload\"))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CodeExecutionResWidgit, {\n    out: out,\n    err: err,\n    clear: clearExecutionRes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 17\n    }\n  })))))), /*#__PURE__*/React.createElement(StudentRightMenu, {\n    drawerWidth: drawerWidth,\n    socket: socket,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Stack, {\n    direction: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 7\n    }\n  }, LocalVideo, RemoteVideo), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"call-button\",\n    onClick: function onClick() {\n      return setupCall(\"testid\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 7\n    }\n  }, \"Call\"));\n}\n\nfunction myPythonCompletions(context) {\n  var word = context.matchBefore(/\\w*/);\n  if (word.from == word.to && !context.explicit) return null;\n\n  if (word.text[0] === word.text[0].toUpperCase() && /^[a-zA-Z]+$/.test(word.text[0])) {\n    return {\n      from: word.from,\n      options: upperPythonKeys\n    };\n  }\n\n  return {\n    from: word.from,\n    options: lowerPythonKeys\n  };\n}\n\nfunction myJavaCompletions(context) {\n  var word = context.matchBefore(/\\w*/);\n  if (word.from == word.to && !context.explicit) return null;\n  return {\n    from: word.from,\n    options: javaKeys\n  };\n}\n\nvar globalPythonCompletions = pythonLanguage.data.of({\n  autocomplete: myPythonCompletions\n});\nvar globalJavaScriptCompletions = javaLanguage.data.of({\n  autocomplete: myJavaCompletions\n});\nexport default StudentPage;","map":{"version":3,"names":["useCallback","useState","useEffect","useRef","Peer","CodeMirror","InputLabel","MenuItem","FormControl","Stack","Select","SelectChangeEvent","Box","Button","Grid","EditorOptionsBar","Toolbar","StudentRightMenu","Storage","CallIcon","storage","ref","uploadBytesResumable","getDownloadURL","upperPythonKeys","lowerPythonKeys","javaKeys","EditorState","Compartment","python","pythonLanguage","CompletionContext","javascript","javascriptLanguage","java","javaLanguage","authenticationService","runCode","React","CodeExecutionResWidgit","drawerWidth","t","servers","iceServers","urls","iceCandidatePoolSize","StudentPage","socket","curUser","language","setLanguage","code","setCode","lecCode","setLecCode","flag","setFlag","out","setOut","err","setErr","codePath","setCodePath","codeFilename","setCodeFilename","callStream","setCallStream","receivingCall","setReceivingCall","caller","setCaller","callerSignal","setCallerSignal","callAccepted","setCallAccepted","localVideo","remoteVideo","extensions","jsx","globalPythonCompletions","globalJavaScriptCompletions","uploadFileFormHandler","event","preventDefault","uploadFile","target","files","then","res","file","text","name","f","Promise","rej","console","log","cp","currentUser","source","_value","username","fileStorageRef","uploadFileTaskStatus","on","u","p","totalBytes","Math","round","bytesTransferred","makeDownloadFileRequest","url","xhr","XMLHttpRequest","responseType","onload","status","response","onerror","open","send","downloadFile","fileLocation","id","connect","emit","SktId","role","tid","value","File","data","from","signal","onChange","viewUpdate","editor","state","values","prevUserEvent","run","clearExecutionRes","setupCall","teacherSocketId","navigator","mediaDevices","getUserMedia","video","audio","localStream","current","srcObject","peer","initiator","trickle","config","stream","userToCall","signalData","acceptCall","to","LocalVideo","RemoteVideo","flexGrow","width","sm","e","myPythonCompletions","context","word","matchBefore","explicit","toUpperCase","test","options","myJavaCompletions","of","autocomplete"],"sources":["/Users/kw/Desktop/cscc09/project-pacer/frontend/src/StudentPage.jsx"],"sourcesContent":["import { useCallback, useState, useEffect, useRef } from \"react\";\nimport Peer from \"simple-peer\";\nimport CodeMirror from \"@uiw/react-codemirror\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Stack from \"@mui/material/Stack\";\nimport Select, { SelectChangeEvent } from \"@mui/material/Select\";\nimport Box from \"@mui/material/Box\";\nimport Button from \"@mui/material/Button\";\nimport Grid from \"@mui/material/Grid\";\nimport EditorOptionsBar from \"./components/EditorOptions\";\nimport Toolbar from \"@mui/material/Toolbar\";\nimport StudentRightMenu from \"./components/StudentRightMenu\";\nimport Storage from \"./components/Storage\";\nimport CallIcon from '@mui/icons-material/Call';\n// for file up/downloading (via fb):\nimport { storage } from \"./_components/FireBase\";\nimport { ref, uploadBytesResumable, getDownloadURL } from \"@firebase/storage\";\nimport { upperPythonKeys, lowerPythonKeys, javaKeys } from \"./_helpers\";\n\nimport { EditorState, Compartment } from \"@codemirror/state\";\nimport { python, pythonLanguage } from \"@codemirror/lang-python\";\nimport { CompletionContext } from \"@codemirror/autocomplete\";\nimport { javascript, javascriptLanguage } from \"@codemirror/lang-javascript\";\nimport { java, javaLanguage } from \"@codemirror/lang-java\";\nimport { authenticationService } from \"./_services\";\nimport runCode from \"./_helpers/codeRunner\";\n\nimport React from \"react\";\n// import { socket } from \"./_services\";\nimport CodeExecutionResWidgit from \"./components/CodeExecutionResWidgit\";\nimport \"./StudentPage.css\";\n\nconst drawerWidth = 200;\n// for cloud sync (via fb) [experimental - TODO]:\nlet t = 0; // ns\n\nconst servers = {\n  iceServers: [\n    {\n      urls: ['stun:stun1.l.google.com:19302', 'stun:stun2.l.google.com:19302'],\n    },\n  ],\n  iceCandidatePoolSize: 10,\n};\n\n\nfunction StudentPage({ socket, curUser }) {\n  // code mirror config\n  const [language, setLanguage] = useState(() => \"javascript\");\n  // code display and transmission\n  // like a cache: keeping this since downloading & uploading the file on each update is very inefficient\n  const [code, setCode] = useState(() => \"\"); \n  const [lecCode, setLecCode] = useState(() => \"console.log('hello students!');\");\n  const [flag, setFlag] = useState(() => false);\n  // execution\n  const [out, setOut] = useState(() => null);\n  const [err, setErr] = useState(() => null);\n  // save and load\n  const [codePath, setCodePath] = useState(\"\"); // set init val to \"\"\n  const [codeFilename, setCodeFilename] = useState(\"\");\n  // audio call\n  const [callStream, setCallStream] = useState(() => null);\n  const [receivingCall, setReceivingCall] = useState(() => false);\n  const [caller, setCaller] = useState(() => \"\");\n  const [callerSignal, setCallerSignal] = useState(() => null);\n  const [callAccepted, setCallAccepted] = useState(() => false);\n\n  \n  const localVideo = useRef();\n  const remoteVideo = useRef();\n\n  \n  let extensions = [javascript({ jsx: true })];\n  if (language === \"javascript\") {\n    extensions[0] = javascript({ jsx: true });\n  } else if (language === \"python\") {\n    extensions[0] = python();\n    extensions[1] = globalPythonCompletions;\n  } else {\n    extensions[0] = java();\n    extensions[1] = globalJavaScriptCompletions;\n  }\n  \n\n  // for cloud sync (via fb) [experimental - TODO]:\n  // todo-kw: uncomment this\n  // useEffect(() => {\n  //   setTimeout(() => {\n  //     if (t == 1) {\n  //       t = 0;\n  //       const f = new File([code], codeFilename);\n  //       uploadFile(f);\n  //     } else {\n  //       t++;\n  //     }\n  //   }, 1000);\n  // });\n\n\n  // for file uploading (via fb):\n  const uploadFileFormHandler = (event) => {\n    event.preventDefault();\n    uploadFile(event.target[0].files[0])\n      .then((res) => {\n        res.file.text().then((code) => {\n          setCode(code);\n          setCodePath(res.codePath);\n          setCodeFilename(res.file.name);\n        });\n      });\n  };\n\n\n  // for file uploading (via fb):\n  const uploadFile = (f) => {\n    return new Promise(function (res, rej) {\n      if (!f) {\n        console.log('Upload failed. Try a different file.');\n        rej();\n      }\n      const cp = `/files/users/${authenticationService.currentUser.source._value.username}/${f.name}`;\n      const fileStorageRef = ref(storage, cp);\n      const uploadFileTaskStatus = uploadBytesResumable(fileStorageRef, f);\n      uploadFileTaskStatus.on(\n        \"state_changed\",\n        (u) => {\n          let p = 100;\n          if (u.totalBytes > 0) {\n            p = Math.round((u.bytesTransferred / u.totalBytes) * 100);\n          }\n        },\n        (err) => {\n          console.log(err);\n          rej();\n        },\n        () => {\n          // when the file is uploaded successfully:\n          //getDownloadURL(uploadFileTaskStatus.snapshot.ref).then((url) => console.log(url));\n          res({\"file\": f, \"codePath\": cp});\n        }\n      );\n    });\n  };\n\n\n  // for file downloading (via fb):\n  const makeDownloadFileRequest = (url) => {\n    return new Promise(function (res, rej) {\n      let xhr = new XMLHttpRequest();\n      // handle xhr response:\n      xhr.responseType = 'text';\n      xhr.onload = (event) => {\n        if (xhr.status == 200) {\n          res({\"code\": xhr.response});\n        } else {\n          console.log(xhr.status);\n          rej();\n        }\n      };\n      xhr.onerror = () => {\n        console.log(xhr.status);\n        rej();\n      };\n      xhr.open('GET', url);\n      xhr.send(); // is xhr onload async\n    });\n  }\n\n\n  // for file downloading (via fb):\n  const downloadFile = (fileLocation) => {\n    const fileStorageRef = ref(storage, fileLocation);\n    return getDownloadURL(fileStorageRef)\n      .then((url) => makeDownloadFileRequest(url));\n  };\n\n  \n  useEffect(() => {\n    if(!socket.id) socket.connect()\n\n    socket.emit(\"set attributes\", \"student\", curUser);\n\n    socket.on(\"connection broadcast\", (SktId, role, curUser) => {\n      console.log(`connection broadcast: new user: ${curUser} (socket id: ${SktId}) joined as ${role}`);\n    });\n\n    socket.on(\"disconnection broadcast\", (SktId, role, curUser) => {\n      if (role === 'teacher') socket.tid = \"\";\n      console.log(`disconnection broadcast: ${role} - ${curUser} (socket id: ${SktId})`);\n    });\n\n    socket.on(\"teacher join\", (tid) => {\n      socket.tid = tid; \n      socket.emit('student join', curUser);\n    });\n\n    socket.on(\"fetch request\", () => {\n      setFlag(true)\n    });\n\n    socket.on(\"stop request\", () => {\n      setFlag(false)\n    });\n\n    socket.on(\"onChange\", (value, tid) => {\n      if (flag) setCode(value);\n    });\n\n    socket.on(\"onLecChange\", (value, tid) => {\n      if(!socket.tid) socket.tid = tid;\n      setLecCode(value);\n    });\n\n    // for file downloading (via fb):\n    if (code === \"\" && codePath === \"\" && codeFilename === \"\") {\n      let cp = \"/files/defaults/ystudent.txt\";\n      downloadFile(cp)\n        .then((res) => {\n          const f = new File([res.code], \"whateveryouwant.txt\");\n          return uploadFile(f);\n        })\n        .then((res) => {\n          res.file.text().then((code) => {\n            setCode(code);\n            setCodePath(res.codePath);\n            setCodeFilename(res.file.name);\n          });\n        });\n    }\n    // for when code + codePath correspond to session, so an uploaded file can take over code slide\n\n    socket.on(\"hey\", (data) => {\n      setReceivingCall(true);\n      setCaller(data.from);\n      setCallerSignal(data.signal);\n    })\n\n    console.log(\"load student page complete\");\n  }, []);\n\n\n  useEffect(() => {\n      socket.emit(\"fetch init\", code);\n  }, [flag])\n\n\n  const onChange = (value, viewUpdate) => {\n    const editor = viewUpdate.state.values[0].prevUserEvent;\n    if (flag && editor) socket.emit(\"onChange\", value, socket.tid);\n\n    setCode(value);\n  };\n\n\n  const run = () => {\n    const { out, err } = runCode(code, language);\n    setOut(out);\n    setErr(err);\n  };\n\n\n  const clearExecutionRes = () => {\n    setOut(null);\n    setErr(null);\n  };\n\n\n  const setupCall = async (teacherSocketId) => {\n    console.log(teacherSocketId)\n    console.log(\"seting up call\")\n    const localStream = await navigator.mediaDevices.getUserMedia({ video: false, audio: true });\n    console.log(\"hardware setup complete\")\n    setCallStream(localStream)\n    if (localVideo.current) {\n      localVideo.current.srcObject = localStream;\n    }\n\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      config: servers,\n      stream: callStream\n    })\n    \n    peer.on(\"signal\", data => {\n      //yourID\n      socket.emit(\"callUser\", {userToCall: teacherSocketId, signalData: data, from: \"yourID\"}) \n    })\n\n    peer.on(\"stream\", stream => {\n      if (remoteVideo.current) {\n        remoteVideo.current.srcObject = stream;\n      }\n    })\n\n    // todo-kw: move it out\n    socket.on(\"callAccepted\", signal => {\n      setCallAccepted(true);\n      peer.signal(signal);\n    })\n  }\n\n\n  const acceptCall = () => {\n    setCallAccepted(true);\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream: callStream,\n    });\n    peer.on(\"signal\", data => {\n      socket.emit(\"acceptCall\", { signal: data, to: caller })\n    })\n\n    peer.on(\"stream\", stream => {\n      remoteVideo.current.srcObject = stream;\n    });\n\n    peer.signal(callerSignal);\n  }\n\n\n  let LocalVideo;\n  if (callStream) {\n    LocalVideo = (\n      <video playsInline muted ref={localVideo} autoPlay />\n    );\n  }\n\n\n  let RemoteVideo;\n  if (callAccepted) {\n    RemoteVideo = (\n      <video playsInline ref={remoteVideo} autoPlay />\n    );\n  }\n\n\n  return (\n    <>\n      <Box\n        sx={{\n          flexGrow: 1,\n          p: 3,\n          width: { sm: `calc(100% - ${drawerWidth}px)` },\n        }}\n      >\n        <Toolbar />\n        <Grid container spacing={2}>\n          <Grid item xs={6}>\n            <Grid\n              container\n              direction=\"column\"\n              alignItems=\"stretch\"\n              rowSpacing={1}\n              columnSpacing={3}\n            >\n              <Grid item xs={12}>\n                <p>Server Screen (remote):</p>\n              </Grid>\n              {/* server display */}\n              {/* <CodeMirror value=\"\" height=\"600px\" theme=\"dark\" hint=\"true\" /> */}\n              <Grid item xs={12}>\n                <CodeMirror\n                  value={lecCode}\n                  height=\"600px\"\n                  theme=\"dark\"\n                  extensions={extensions}\n                  hint=\"true\"\n                  readOnly=\"true\"\n                />\n              </Grid>\n            </Grid>\n          </Grid>\n          <Grid item xs={6}>\n            <Grid\n              container\n              direction=\"column\"\n              alignItems=\"stretch\"\n              rowSpacing={4}\n              columnSpacing={3}\n            >\n              <Grid item xs={12}>\n                <EditorOptionsBar\n                  language={language}\n                  onLanguageChange={(e) => setLanguage(e.target.value)}\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <p>Client Screen (local):</p>\n              </Grid>\n              <Grid item xs={12}>\n                {/* client display */}\n                <CodeMirror\n                  value={code}\n                  height=\"600px\"\n                  theme=\"dark\"\n                  extensions={extensions}\n                  onChange={onChange}\n                  hint=\"true\"\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <Stack\n                  spacing={3}\n                  direction=\"row\"\n                  justifyContent=\"center\"\n                  alignItems=\"space-evenly\"\n                >\n                  <Button onClick={run} variant=\"contained\">\n                    Run\n                  </Button>\n                  <Storage value={code}></Storage>\n                </Stack>\n              </Grid>\n              <Grid item xs={12}>\n                <form onSubmit={uploadFileFormHandler}>\n                  <input type=\"file\" className=\"input\" />\n                  <button type=\"submit\">Upload</button>\n                </form>\n              </Grid>\n              <Grid item xs={12}>\n                <CodeExecutionResWidgit\n                  out={out}\n                  err={err}\n                  clear={clearExecutionRes}\n                />\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Box>\n      <StudentRightMenu drawerWidth={drawerWidth} socket={socket} />\n      <Stack direction=\"row\">{LocalVideo}{RemoteVideo}</Stack>\n      <button className=\"call-button\" onClick={() => setupCall(\"testid\")}>Call</button>\n    </>\n  );\n}\n\nfunction myPythonCompletions(context: CompletionContext) {\n  let word = context.matchBefore(/\\w*/);\n  if (word.from == word.to && !context.explicit) return null;\n  if (\n    word.text[0] === word.text[0].toUpperCase() &&\n    /^[a-zA-Z]+$/.test(word.text[0])\n  ) {\n    return {\n      from: word.from,\n      options: upperPythonKeys,\n    };\n  }\n  return {\n    from: word.from,\n    options: lowerPythonKeys,\n  };\n}\n\nfunction myJavaCompletions(context: CompletionContext) {\n  let word = context.matchBefore(/\\w*/);\n  if (word.from == word.to && !context.explicit) return null;\n  return {\n    from: word.from,\n    options: javaKeys,\n  };\n}\n\nconst globalPythonCompletions = pythonLanguage.data.of({\n  autocomplete: myPythonCompletions,\n});\n\nconst globalJavaScriptCompletions = javaLanguage.data.of({\n  autocomplete: myJavaCompletions,\n});\n\nexport default StudentPage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}